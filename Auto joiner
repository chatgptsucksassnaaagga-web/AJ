repeat task.wait() until game:IsLoaded()

local RELAY_FETCH = "https://selections-impression-renaissance-paul.trycloudflare.com/latest"

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui")

local LocalPlayer = Players.LocalPlayer

pcall(function()
    local old = CoreGui:FindFirstChild("Krypth AutoJoiner")
    if old then old:Destroy() end
end)

-- GUI BUILD (UNCHANGED STYLE)
local ScreenGui = Instance.new("ScreenGui", CoreGui)
ScreenGui.Name = "Krypth AutoJoiner"
ScreenGui.ResetOnSpawn = false

local Main = Instance.new("Frame", ScreenGui)
Main.AnchorPoint = Vector2.new(0.5,0.5)
Main.Position = UDim2.fromScale(0.5,0.5)
Main.Size = UDim2.fromScale(0.46,0.6)
Main.BackgroundColor3 = Color3.fromRGB(17,17,22)
Instance.new("UICorner",Main).CornerRadius = UDim.new(0,20)

local Title = Instance.new("TextLabel",Main)
Title.Size = UDim2.new(1,0,0,72)
Title.Text = "ðŸ§  Krypth AutoJoiner"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 23
Title.TextColor3 = Color3.fromRGB(235,235,245)
Title.BackgroundTransparency = 1

local Scroll = Instance.new("ScrollingFrame",Main)
Scroll.Position = UDim2.new(0,18,0,90)
Scroll.Size = UDim2.new(1,-36,1,-110)
Scroll.ScrollBarThickness = 6
Scroll.BackgroundTransparency = 1

local Layout = Instance.new("UIListLayout",Scroll)
Layout.Padding = UDim.new(0,14)

Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    Scroll.CanvasSize = UDim2.new(0,0,0,Layout.AbsoluteContentSize.Y+20)
end)

-- ROW CREATION (FIXED)
local function createRow(data)
    local Row = Instance.new("Frame",Scroll)
    Row.Size = UDim2.new(1,0,0,70)
    Row.BackgroundColor3 = Color3.fromRGB(23,23,30)
    Instance.new("UICorner",Row).CornerRadius = UDim.new(0,16)

    local Text = Instance.new("TextLabel",Row)
    Text.Position = UDim2.new(0,22,0,0)
    Text.Size = UDim2.new(0.6,-22,1,0)
    Text.Text = data.brainrot.."  "..data.money
    Text.Font = Enum.Font.GothamBold
    Text.TextSize = 16
    Text.TextColor3 = Color3.fromRGB(220,220,230)
    Text.BackgroundTransparency = 1
    Text.TextXAlignment = Left

    local Join = Instance.new("TextButton",Row)
    Join.Size = UDim2.new(0,130,0,42)
    Join.Position = UDim2.new(1,-150,0.5,-21)
    Join.Text = "JOIN"
    Join.Font = Enum.Font.GothamBold
    Join.TextSize = 15
    Join.BackgroundColor3 = Color3.fromRGB(45,200,125)
    Instance.new("UICorner",Join).CornerRadius = UDim.new(0,12)

    Join.MouseButton1Click:Connect(function()
        TeleportService:TeleportToPlaceInstance(
            data.placeId,
            data.jobId,
            LocalPlayer
        )
    end)
end

-- FETCH LOOP
task.spawn(function()
    while true do
        task.wait(3)

        Scroll:ClearAllChildren()
        Layout.Parent = Scroll

        local ok,res = pcall(function()
            return HttpService:JSONDecode(game:HttpGet(RELAY_FETCH))
        end)

        if ok and res then
            createRow(res)
        end
    end
end)
