-- =========================
-- Brainrot GUI Joiner
-- =========================

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- ðŸ”´ CLOUDFARE URL (DO NOT CHANGE)
local RELAY_URL = "https://selections-impression-renaissance-paul.trycloudflare.com/servers"

--------------------------------------------------
-- GUI
--------------------------------------------------
local gui = Instance.new("ScreenGui")
gui.Name = "BrainrotJoiner"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local main = Instance.new("Frame", gui)
main.Size = UDim2.fromScale(0.45, 0.55)
main.Position = UDim2.fromScale(0.275, 0.225)
main.BackgroundColor3 = Color3.fromRGB(18,18,18)
main.BorderSizePixel = 0
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 14)

local title = Instance.new("TextLabel", main)
title.Size = UDim2.fromScale(1, 0.12)
title.BackgroundTransparency = 1
title.Text = "ðŸ§  Brainrot Server Joiner"
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.new(1,1,1)

--------------------------------------------------
-- List
--------------------------------------------------
local list = Instance.new("ScrollingFrame", main)
list.Position = UDim2.fromScale(0, 0.14)
list.Size = UDim2.fromScale(1, 0.86)
list.AutomaticCanvasSize = Enum.AutomaticSize.Y
list.CanvasSize = UDim2.new()
list.ScrollBarImageTransparency = 0.2
list.BackgroundTransparency = 1
list.BorderSizePixel = 0

local layout = Instance.new("UIListLayout", list)
layout.Padding = UDim.new(0, 10)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

--------------------------------------------------
-- Button
--------------------------------------------------
local function createButton(data)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.fromScale(0.92, 0.12)
    btn.BackgroundColor3 = Color3.fromRGB(30,30,30)
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.TextWrapped = true
    btn.Font = Enum.Font.Gotham
    btn.Text =
        data.bestBrainrot ..
        "\n$" .. math.floor(data.mps) .. "/s  |  " ..
        data.players .. "/" .. data.maxPlayers

    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)

    btn.MouseButton1Click:Connect(function()
        TeleportService:TeleportToPlaceInstance(
            data.placeId,
            data.jobId,
            player
        )
    end)

    btn.Parent = list
end

--------------------------------------------------
-- Refresh
--------------------------------------------------
task.spawn(function()
    while true do
        task.wait(8)

        for _,v in ipairs(list:GetChildren()) do
            if v:IsA("TextButton") then
                v:Destroy()
            end
        end

        local ok, data = pcall(function()
            return HttpService:JSONDecode(game:HttpGet(RELAY_URL))
        end)

        if ok and type(data) == "table" then
            for _,server in ipairs(data) do
                createButton(server)
            end
        end
    end
end)
